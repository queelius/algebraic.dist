---
title: "Exponential distribution"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Exponential distribution}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction
To demonstrate the R package `algebraic.dst`, we consider the relatively
simple case of exponentially distributed random variables.

First, we load the R package `algebraic.dist` with:

```{r setup, message = FALSE}
library(algebraic.dist)
```

# Generating a sample

We define the parameters of the i.i.d. random sample with:
```{r init_params}
n <- 10000
rate <- .5
```

We generate a random sample $X_i \sim \operatorname{EXP}(\lambda=`r rate`)$ for
$i=1,\ldots,n$ with:
```{r load_dist, message=F, warning=F}
exp.dist <- exp_dist(rate=rate)
sampler <- sampler(exp.dist)
data <- sampler(n)
```

We have observed a sample of size $n=`r n`$.
We show some observations from this sample with:
```{r print_data}
head(data, n = 4)
```


Let's retrieve some functions:
```{r get_functions}
f <- pdf(exp.dist)
F <- cdf(exp.dist)
```


We show a histogram of the sample overlaid with a plot of the exponential
function's pdf, cdf, and survival, with:
```{r plotter, fig.width=6, fig.height=4, fig.align="center"}
hist(data, freq = FALSE, breaks = 40, ylim = c(0, 1))
curve(f(x), add = TRUE, col = "red")
curve(F(x), add = TRUE, col = "blue")
```



We construct a data frame showing mean and variance for each
way three ways of it, using `mean` and `vcov`, using `expectation` (defined
for all `dist` objects using Monte Carlo integration), and using the
analytical formulae for the mean and variance of the exponential
and the definitions of each, and using the sample mean and sample variance.

```{r}
expectation(exp.dist, function(x) x^2)
```

```{r}
df <- data.frame(
  analytical = c(mean(exp.dist),
                 vcov(exp.dist)),
  mc = c(expectation(exp.dist, function(x) x)$value,
         expectation(exp.dist, function(x) (x - mean(exp.dist))^2)$value),
  sample = c(mean(data), var(data))
)
row.names(df) <- c("mean", "variance")
print(df)
```


We also provide a way of retrieving the support of a distribution:
```{r}
support <- sup(exp.dist)
contains(support, 2)
infinum(support)
supremum(support)
```
